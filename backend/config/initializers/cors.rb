# frozen_string_literal: true

# Be sure to restart your server when you modify this file.
#
# CORS configuration for the React frontend.
# credentials: true is required so the browser sends the encrypted auth cookie.

Rails.application.config.middleware.insert_before 0, Rack::Cors do
  allow do
    origins ENV.fetch("FRONTEND_URL", "http://localhost:5173")

    resource "*",
      headers:     :any,
      methods:     %i[get post put patch delete options head],
      credentials: true,
      expose:      [ "X-Request-Id" ]
  end
end
